@{
    ViewData["Title"] = "Home Page";
    List<SelectListItem> categories = new List<SelectListItem>();
    /* add our caegories into the list of ListItem */
    categories.Add(new SelectListItem
            {
                Text = "Need",
                Value = "Need"
            });
    categories.Add(new SelectListItem
            {
                Text = "Want",
                Value = "Want"
            });
    categories.Add(new SelectListItem
            {
                Text = "Saving/Invest",
                Value = "Saving/Invest"
            });
    categories.Add(new SelectListItem
            {
                Text = "Income",
                Value = "Income"
            });
}

@model budgetApp.Models.EntryModel
<head>
    <link type="text/javascript" href="~/js/site.js" />
    <link type="text/css" href="~/css/site.css" />
</head>
<body onload="checkUserSession()">
<div class="text-center">
    <h1 class="display-4">@ViewBag.Message</h1>
</div>



    <form asp-controller="Home" method="post" id="entryForm" role="form" onsubmit="return checkFields()">
    <div>
        <table class="table">
            <tr>
                <td scope="col">Amount($)</td>
                <td scope="col">@Html.TextBoxFor(x=>x.amount, new {@style = "width: 200px;",@id="txtAmt", @type="number", @min="0.01",@step="0.01", @value="0"})</td>
            </tr>
            <tr>
                <td scope="col">Category</td>
                <td scope="col">@Html.DropDownListFor(x=>x.category, categories, new {@style = "width: 200px;", @id="ddlCat"})</td>
            </tr>
            <tr>
                <td scope="col">Sub Category(optional)</td>
                <td scope="col">@Html.TextBoxFor(x=>x.subCategory, new {@style = "width: 200px;", @id="txtSub"})</td>
            </tr>
            <tr>
                <td scope="col">Description(Optional)</td>
                <td scope="col">@Html.TextAreaFor(x=>x.description, new {@style = "heigth: 80px; width: 200px;", @id="txtDesc"})</td>
            </tr>
            <tr>
                <td scope="col">Date other than today @Html.CheckBoxFor(x=>x.otherDate, new {@id="chkDate"})</td>
                <td scope="col"><input type="date" name="date" id="dtpDate"/></td>
            </tr>
        </table>
        <button type="submit" class="btn btn-outline-primary btn-lg">Submit</button>
    </div>
    </form>
    <div>
        @Html.ActionLink("View Reports", "Report")
    </div>

    </body>
<script>
//make sure that all required fields have a value before sending them back
    
    function checkFields(){
        
        if(document.getElementById("txtAmt").value <= 0){
            alert("Must enter an amount.");
            return false;
        }
        
        if(document.getElementById("ddlCat").value == null || document.getElementById("ddlCat").value == ""){
            alert("Must select a category.");
            return false;
        }
        if(document.getElementById("chkDate").checked){
            //if they checked the other date radio button we need to make sure they chose a date
            if(document.getElementById("dtpDate").value == null || document.getElementById("dtpDate").value == ""){
                alert("If you wish to change the date you must select one from the datepicker.");
                return false;
            }
        }
        return true;
    }
</script>